os: linux
language: go
go:
- "1.10.4"

branches:
  only:
  - master

before_install:
- export GOROOT=$(go env GOROOT)
- export GOBIN=$(go env GOBIN)

install:
  - curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh
- sudo start-docker-daemon

script:
  - make update-vendors
  - make
  - GENERATE_REPORT=1 make tests
  - GENERATE_REPORT=1 make lint
  - GENERATE_REPORT=1 make coverage
